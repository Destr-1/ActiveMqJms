<?xml version="1.0" encoding="utf-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext
        http://www.liquibase.org/xml/ns/dbchangelog-ext.xcd
        http://www.liquibase.org/xml/ns/dbchangelog
http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd">

    <changeSet id="makeEvents" author="Dmitry">
        <sql>
            create type event_type as enum ('SMS', 'EMAIL', 'PUSH');
            create type status_type as enum('NEW', 'IN_PROGRESS', 'DONE', 'ERROR');
            CREATE TABLE Events
            (
                id        INT PRIMARY KEY NOT NULL,
                type      event_type NOT NULL,
                body      VARCHAR(50),
                status    status_type NOT NULL
            );
            CREATE SEQUENCE EVENT_SEQ INCREMENT BY 1;
        </sql>
    </changeSet>

    <changeSet id="fillEvents" author="Dmitry">
        <sql>

            insert into EVENTS values (next value for EVENT_SEQ, 'SMS', 'SMS-BODY-NEW', 'NEW');
            insert into EVENTS values (next value for EVENT_SEQ, 'EMAIL', 'EMAIL-BODY-NEW', 'NEW');
            insert into EVENTS values (next value for EVENT_SEQ, 'PUSH', 'PUSH-BODY-NEW', 'NEW');
            insert into EVENTS values (next value for EVENT_SEQ, 'SMS', 'SMS-BODY-DONE', 'DONE');
            insert into EVENTS values (next value for EVENT_SEQ, 'EMAIL', 'EMAIL-BODY-DONE', 'DONE');
        </sql>
    </changeSet>

</databaseChangeLog>
